-- Function: client_price_list_products_update(integer, integer, numeric, numeric, numeric, numeric)DROP FUNCTION client_price_list_products_update(integer, integer, numeric, numeric, numeric, numeric);CREATE OR REPLACE FUNCTION client_price_list_products_update(in_price_list_id integer, in_product_id integer, in_price numeric, in_discount_volume numeric, in_discount_total numeric, in_pack_price numeric)  RETURNS void AS$BODY$BEGIN	UPDATE client_price_list_products	SET		price = in_price,		discount_volume = in_discount_volume,		discount_total = in_discount_total,		pack_price = in_pack_price	WHERE price_list_id=in_price_list_id AND product_id = in_product_id;	IF NOT FOUND THEN		BEGIN			INSERT INTO client_price_list_products (				price_list_id,product_id,				price,discount_volume,discount_total,pack_price				)			VALUES (				in_price_list_id,in_product_id,				in_price,in_discount_volume,in_discount_total,in_pack_price			);		EXCEPTION WHEN OTHERS THEN			UPDATE client_price_list_products			SET				price = in_price,				discount_volume = in_discount_volume,				discount_total = in_discount_total,				pack_price = in_pack_price			WHERE price_list_id=in_price_list_id AND product_id = in_product_id;		END;	END IF;END;$BODY$  LANGUAGE plpgsql VOLATILE  COST 100;ALTER FUNCTION client_price_list_products_update(integer, integer, numeric, numeric, numeric, numeric)  OWNER TO polimerplast;