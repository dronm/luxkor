/* Copyright (c) 2014	Andrey Mikhalevich, Katren ltd.*//*		Description*///ф/** Requirements*//* constructor */function BtnCustomSurvey(options){		var self = this;	var id = uuid();	options.caption = "Опрос";	options.attrs={"title":"внести данные об опросе клиента"};	options.onClick=function(){		var keys = options.grid.getSelectedNodeKeys();		if (keys){			self.m_extCtrl=new DOCOrderCustSurveyDialog_View("DOCOrderCustSurveyDialog_View",				{"winObj":self.m_extForm,				"readController":new DOCOrder_Controller(new ServConnector(HOST_NAME)),				"onClose":function(){					self.m_extForm.close();					delete self.m_extForm;				}				});						self.m_extForm = new WIN_CLASS(				{"title":"Опрос клиента",				"width":self.m_extCtrl.getFormWidth(),				"height":self.m_extCtrl.getFormHeight(),				"onBeforeClose":function(){					var r= true;					if (self.m_extForm.m_closeMode==0					&&self.m_extCtrl.onCancel){						self.m_extCtrl.setOnClose(null);						r = self.m_extCtrl.onCancel.call(self.m_extCtrl);					}					options.grid.onRefresh();					return r;								}								});			self.m_extForm.open();							for (var key_id in keys){				self.m_extCtrl.setReadIdValue(key_id,keys[key_id]);					}										self.m_extCtrl.readData(true);			self.m_extCtrl.m_beforeOpen(new DOCOrder_Controller(new ServConnector(HOST_NAME)),false);						self.m_extCtrl.toDOM(self.m_extForm.getContentParent());			self.m_extForm.setFocus();		}	};	BtnCustomSurvey.superclass.constructor.call(this,		id,options);}extend(BtnCustomSurvey,Button);